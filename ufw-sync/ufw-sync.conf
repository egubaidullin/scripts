# /etc/ufw-sync/ufw-sync.conf
# Конфигурация ufw-sync — редактируйте этот файл, не трогая сам скрипт.
# После изменений запустите: sudo /opt/ufw-sync/ufw-sync.sh

# ─────────────────────────────────────────────
# SSH
# ─────────────────────────────────────────────
# Порт SSH. Оставьте пустым для авто-детекта из /etc/ssh/sshd_config
SSH_PORT=""

# ─────────────────────────────────────────────
# ПУБЛИЧНЫЕ ПОРТЫ (открыты всем без ограничений)
# ─────────────────────────────────────────────
# TCP-порты, доступные всем (пробел как разделитель)
PUBLIC_PORTS_TCP="80 443"

# UDP-порты, доступные всем. Пример: "51820" для WireGuard
PUBLIC_PORTS_UDP=""

# ─────────────────────────────────────────────
# WHITELIST-ONLY ПОРТЫ (только для IP из allowed_ips.txt)
# ─────────────────────────────────────────────
# TCP-порты, доступные только по белому списку IP
WHITELIST_PORTS_TCP="81 8080 8443"

# UDP-порты по белому списку
WHITELIST_PORTS_UDP=""

# ─────────────────────────────────────────────
# ПУТИ
# ─────────────────────────────────────────────
IP_FILE="/opt/configs/allowed_ips.txt"
LOG_FILE="/var/log/ufw_sync.log"
BACKUP_DIR="/opt/ufw-sync/backups"

# ─────────────────────────────────────────────
# CLOUDFLARE
# ─────────────────────────────────────────────
# 1 = разрешить Cloudflare IP на PUBLIC_PORTS_TCP, 0 = отключить
ENABLE_CLOUDFLARE=1

# ─────────────────────────────────────────────
# DOCKER
# ─────────────────────────────────────────────
# 1 = авто-добавить UFW-правила для всех Docker-подсетей
ENABLE_DOCKER_NETWORKS=1

# Диапазон для MASQUERADE в after.rules (NAT для контейнеров → интернет)
DOCKER_MASQUERADE_RANGE="172.16.0.0/12"

# ─────────────────────────────────────────────
# FAIL2BAN
# ─────────────────────────────────────────────
# 1 = добавить IP из белого списка в ignoreip, 0 = не трогать fail2ban
ENABLE_FAIL2BAN=1

# ─────────────────────────────────────────────
# РЕЖИМ ЗАПУСКА
# ─────────────────────────────────────────────
# 1 = только показать что будет сделано (без применения), 0 = применять
DRY_RUN=0
